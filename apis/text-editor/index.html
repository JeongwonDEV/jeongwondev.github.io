<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Editor API v2.1</title>
    <style>
        @font-face {
            font-family: 'GmarketSansMedium';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Paperlogy-8ExtraBold';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-8ExtraBold.woff2') format('woff2');
            font-weight: 800;
            font-style: normal;
        }

        /* Default fonts */
        @font-face {
            font-family: 'Pretendard-Regular';
            src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: 'SUIT-Regular';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'NanumSquareNeoLight';
            src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-aLt.eot);
            src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-aLt.eot?#iefix) format("embedded-opentype"), url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-aLt.woff) format("woff"), url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-aLt.ttf) format("truetype");
        }

        @import url('//fonts.googleapis.com/earlyaccess/notosanskr.css');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'GmarketSansMedium', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }

        .api-container {
            max-width: 1200px;
            margin: 0 auto;
            background: #ffffff;
            min-height: 100vh;
            border-left: 1px solid #e2e8f0;
            border-right: 1px solid #e2e8f0;
        }

        .api-header {
            background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
            padding: 16px 32px;
            border-bottom: 1px solid #e2e8f0;
        }

        .api-title {
            font-family: 'Paperlogy-8ExtraBold', sans-serif;
            font-size: 18px;
            color: #ffffff;
            font-weight: 800;
            letter-spacing: 0.5px;
        }

        .api-version {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 2px;
        }

        .toolbar-container {
            background: #ffffff;
            border-bottom: 1px solid #e2e8f0;
            padding: 16px 32px;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }

        .toolbar-section {
            display: flex;
            gap: 4px;
            padding: 8px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .toolbar-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: #000000;
            color: #ffffff;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .toolbar-btn:hover {
            background: #1f2937;
            transform: translateY(-1px);
        }

        .toolbar-btn.active {
            background: #3b82f6;
        }

        .toolbar-btn svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        .font-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 4px 8px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .font-size-display {
            min-width: 45px;
            text-align: center;
            font-size: 12px;
            color: #64748b;
            font-weight: 500;
        }

        .color-input {
            width: 36px;
            height: 36px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            padding: 0;
            background: #ffffff;
        }

        .dropdown {
            position: relative;
        }

        .dropdown-btn {
            padding: 8px 16px;
            border: 1px solid #e2e8f0;
            background: #000000;
            color: #ffffff;
            cursor: pointer;
            border-radius: 6px;
            font-size: 13px;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .dropdown-btn:hover {
            background: #1f2937;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: #ffffff;
            min-width: 140px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            top: calc(100% + 4px);
            left: 0;
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-item {
            padding: 10px 16px;
            cursor: pointer;
            color: #374151;
            font-size: 13px;
            border-bottom: 1px solid #f3f4f6;
            transition: background-color 0.2s ease;
        }

        .dropdown-item:hover {
            background: #f8fafc;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .font-dropdown {
            min-width: 200px;
        }

        .font-dropdown .dropdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .add-font-btn {
            background: #3b82f6;
            color: #ffffff;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .add-font-btn:hover {
            background: #2563eb;
        }

        .editor-workspace {
            display: flex;
            height: calc(100vh - 140px);
        }

        .editor-main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .editor-tabs {
            display: flex;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .editor-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 13px;
            color: #64748b;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .editor-tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: #ffffff;
        }

        .editor-tab:hover:not(.active) {
            color: #374151;
            background: rgba(59, 130, 246, 0.05);
        }

        .editor-content {
            flex: 1;
            padding: 32px;
            font-size: 16px;
            line-height: 1.7;
            outline: none;
            border: none;
            background: #ffffff;
            color: #1e293b;
            font-family: 'Pretendard-Regular', 'GmarketSansMedium', sans-serif;
            overflow-y: auto;
        }

        .editor-content:focus {
            outline: none;
        }

        .html-editor {
            flex: 1;
            padding: 32px;
            font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            background: #1e293b;
            color: #e2e8f0;
            border: none;
            outline: none;
            resize: none;
            display: none;
        }

        .html-editor:focus {
            outline: none;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 32px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            font-size: 12px;
            color: #64748b;
        }

        .status-left {
            display: flex;
            gap: 16px;
        }

        .status-right {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .emoji-picker {
            display: none;
            position: absolute;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-width: 320px;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
            top: 50px;
            left: 0;
        }

        .emoji-picker.show {
            display: grid;
        }

        .emoji-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #f3f4f6;
            background: #ffffff;
            cursor: pointer;
            border-radius: 6px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .emoji-btn:hover {
            background: #f8fafc;
            border-color: #e2e8f0;
            transform: scale(1.1);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background: #ffffff;
            margin: 10% auto;
            padding: 32px;
            border-radius: 12px;
            width: 480px;
            max-width: 90%;
            border: 1px solid #e2e8f0;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: #f8fafc;
            color: #64748b;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: #e2e8f0;
            color: #374151;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            background: #ffffff;
            color: #1e293b;
            font-size: 14px;
            font-family: inherit;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            background: #ffffff;
            color: #1e293b;
            font-size: 14px;
            font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
            border-radius: 8px;
            transition: all 0.2s ease;
            resize: vertical;
            min-height: 120px;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .btn {
            padding: 12px 20px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-family: inherit;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .btn-primary {
            background: #3b82f6;
            color: #ffffff;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #f8fafc;
            color: #374151;
            border: 1px solid #e2e8f0;
            margin-left: 8px;
        }

        .btn-secondary:hover {
            background: #f1f5f9;
        }

        .file-input {
            display: none;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f8fafc;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        @media (max-width: 768px) {
            .api-container {
                border-left: none;
                border-right: none;
            }
            
            .toolbar-container {
                padding: 12px 16px;
            }
            
            .toolbar {
                gap: 8px;
            }
            
            .toolbar-section {
                padding: 6px;
            }
            
            .toolbar-btn {
                width: 32px;
                height: 32px;
            }
            
            .editor-content, .html-editor {
                padding: 20px 16px;
            }
            
            .status-bar {
                padding: 8px 16px;
            }
        }

        /* Syntax highlighting for HTML editor */
        .html-editor {
            tab-size: 2;
        }
    </style>
</head>
<body>
    <div class="api-container">
        <!-- API Header -->
        <header class="api-header">
            <div class="api-title">Text Editor API</div>
            <div class="api-version">v2.1.0 • Production Ready</div>
        </header>

        <!-- Toolbar -->
        <div class="toolbar-container">
            <div class="toolbar">
                <!-- Text Formatting -->
                <div class="toolbar-section">
                    <button class="toolbar-btn" onclick="formatText('bold')" title="굵게" id="boldBtn">
                        <svg viewBox="0 0 24 24"><path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"/></svg>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('italic')" title="기울임" id="italicBtn">
                        <svg viewBox="0 0 24 24"><path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"/></svg>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('underline')" title="밑줄" id="underlineBtn">
                        <svg viewBox="0 0 24 24"><path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/></svg>
                    </button>
                </div>

                <!-- Font Controls -->
                <div class="dropdown">
                    <button class="dropdown-btn" onclick="toggleFontDropdown()" title="폰트 선택">
                        <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 6px;"><path d="M9.93 13.5h4.14L12 7.98 9.93 13.5zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z"/></svg>
                        폰트
                    </button>
                    <div id="fontDropdown" class="dropdown-content font-dropdown">
                        <div class="dropdown-item" onclick="changeFont('Pretendard-Regular')">Pretendard</div>
                        <div class="dropdown-item" onclick="changeFont('SUIT-Regular')">SUIT</div>
                        <div class="dropdown-item" onclick="changeFont('NanumSquareNeoLight')">Nanum Square Neo</div>
                        <div class="dropdown-item" onclick="changeFont('Noto Sans KR')">Born Gothic</div>
                        <div class="dropdown-item" onclick="changeFont('Paperlogy-8ExtraBold')">Paperology</div>
                        <div class="dropdown-item" onclick="changeFont('GmarketSansMedium')">Gmarket Sans</div>
                        <div class="dropdown-item" style="border-top: 1px solid #e2e8f0; padding-top: 8px;">
                            <span>사용자 폰트</span>
                            <button class="add-font-btn" onclick="showAddFontModal()">Add User</button>
                        </div>
                    </div>
                </div>

                <!-- Font Size Controls -->
                <div class="font-controls">
                    <button class="toolbar-btn" onclick="decreaseFontSize()" title="글자 크기 줄이기">
                        <svg viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>
                    </button>
                    <span class="font-size-display" id="fontSizeDisplay">16px</span>
                    <button class="toolbar-btn" onclick="increaseFontSize()" title="글자 크기 늘리기">
                        <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                    </button>
                </div>

                <!-- Colors -->
                <div class="toolbar-section">
                    <input type="color" class="color-input" id="textColor" onchange="setTextColor()" title="글자 색상" value="#000000">
                    <input type="color" class="color-input" id="bgColor" onchange="setBackgroundColor()" title="배경 색상" value="#ffffff">
                </div>

                <!-- Alignment -->
                <div class="toolbar-section">
                    <button class="toolbar-btn" onclick="formatText('justifyLeft')" title="왼쪽 정렬">
                        <svg viewBox="0 0 24 24"><path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/></svg>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('justifyCenter')" title="가운데 정렬">
                        <svg viewBox="0 0 24 24"><path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/></svg>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('justifyRight')" title="오른쪽 정렬">
                        <svg viewBox="0 0 24 24"><path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/></svg>
                    </button>
                </div>

                <!-- Lists -->
                <div class="toolbar-section">
                    <button class="toolbar-btn" onclick="formatText('insertUnorderedList')" title="글머리 기호">
                        <svg viewBox="0 0 24 24"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/></svg>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('insertOrderedList')" title="번호 매기기">
                        <svg viewBox="0 0 24 24"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/></svg>
                    </button>
                </div>

                <!-- Insert -->
                <div class="toolbar-section">
                    <button class="toolbar-btn" onclick="showLinkModal()" title="링크 삽입">
                        <svg viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
                    </button>
                    <button class="toolbar-btn" onclick="showEmojiPicker()" title="이모지 삽입">
                        <svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
                    </button>
                    <button class="toolbar-btn" onclick="insertImage()" title="이미지 삽입">
                        <svg viewBox="0 0 24 24"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
                    </button>
                    <input type="file" id="fileInput" class="file-input" onchange="handleFileUpload()" accept="image/*,*">
                    <button class="toolbar-btn" onclick="document.getElementById('fileInput').click()" title="파일 첨부">
                        <svg viewBox="0 0 24 24"><path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/></svg>
                    </button>
                </div>

                <!-- Tools -->
                <div class="toolbar-section">
                    <button class="toolbar-btn" onclick="toggleSpellCheck()" title="맞춤법 검사" id="spellCheckBtn">
                        <svg viewBox="0 0 24 24"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z"/></svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Editor Workspace -->
        <div class="editor-workspace">
            <div class="editor-main">
                <!-- Editor Tabs -->
                <div class="editor-tabs">
                    <button class="editor-tab active" onclick="switchTab('visual')" id="visualTab">비주얼 에디터</button>
                    <button class="editor-tab" onclick="switchTab('html')" id="htmlTab">HTML 소스</button>
                </div>

                <!-- Visual Editor -->
                <div id="editor" class="editor-content" contenteditable="true" spellcheck="true">
                    <p>여기에 내용을 입력하세요...</p>
                </div>

                <!-- HTML Editor -->
                <textarea id="htmlEditor" class="html-editor" placeholder="HTML 코드를 직접 편집하세요..."></textarea>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-left">
                <span id="wordCount">단어: 0</span>
                <span id="charCount">글자: 0</span>
                <span>모드: <span id="currentMode">비주얼</span></span>
            </div>
            <div class="status-right">
                <span>Powered by JeongwonPark</span>
            </div>
        </div>
    </div>

    <!-- Emoji Picker -->
    <div id="emojiPicker" class="emoji-picker"></div>

    <!-- Link Modal -->
    <div id="linkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">링크 삽입</h3>
                <button class="modal-close" onclick="closeLinkModal()">×</button>
            </div>
            <div class="form-group">
                <label class="form-label" for="linkText">링크 텍스트:</label>
                <input type="text" id="linkText" class="form-input" placeholder="링크 텍스트를 입력하세요">
            </div>
            <div class="form-group">
                <label class="form-label" for="linkUrl">URL:</label>
                <input type="url" id="linkUrl" class="form-input" placeholder="https://example.com">
            </div>
            <button class="btn btn-primary" onclick="insertLink()">링크 삽입</button>
            <button class="btn btn-secondary" onclick="closeLinkModal()">취소</button>
        </div>
    </div>

    <!-- Add Font Modal -->
    <div id="addFontModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">사용자 폰트 추가</h3>
                <button class="modal-close" onclick="closeAddFontModal()">×</button>
            </div>
            <div class="form-group">
                <label class="form-label" for="fontName">폰트 이름:</label>
                <input type="text" id="fontName" class="form-input" placeholder="예: MyCustomFont">
            </div>
            <div class="form-group">
                <label class="form-label" for="fontCss">웹 폰트 CSS:</label>
                <textarea id="fontCss" class="form-textarea" placeholder="@font-face {
    font-family: 'MyCustomFont';
    src: url('font-url.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
}"></textarea>
            </div>
            <button class="btn btn-primary" onclick="addCustomFont()">폰트 추가</button>
            <button class="btn btn-secondary" onclick="closeAddFontModal()">취소</button>
        </div>
    </div>

    <script>
        let currentMode = 'visual';
        let spellCheckEnabled = true;
        let currentFontSize = 16;
        let customFonts = JSON.parse(localStorage.getItem('customFonts') || '[]');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initEmojiPicker();
            updateWordCount();
            loadCustomFonts();
            
            // Event listeners
            document.getElementById('editor').addEventListener('input', updateWordCount);
            document.getElementById('htmlEditor').addEventListener('input', updateWordCount);
            
            // Close dropdowns and pickers on outside click
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#emojiPicker') && !e.target.closest('[onclick="showEmojiPicker()"]')) {
                    document.getElementById('emojiPicker').classList.remove('show');
                }
                if (!e.target.closest('#fontDropdown') && !e.target.closest('[onclick="toggleFontDropdown()"]')) {
                    document.getElementById('fontDropdown').classList.remove('show');
                }
            });

            // Update toolbar state on selection change
            const editor = document.getElementById('editor');
            editor.addEventListener('mouseup', updateToolbarState);
            editor.addEventListener('keyup', updateToolbarState);

            // Modal close on outside click
            window.onclick = function(event) {
                const linkModal = document.getElementById('linkModal');
                const fontModal = document.getElementById('addFontModal');
                if (event.target === linkModal) {
                    linkModal.style.display = 'none';
                }
                if (event.target === fontModal) {
                    fontModal.style.display = 'none';
                }
            };
        });

        // Font functions
        function toggleFontDropdown() {
            const dropdown = document.getElementById('fontDropdown');
            dropdown.classList.toggle('show');
        }

        function changeFont(fontFamily) {
            const editor = document.getElementById('editor');
            editor.style.fontFamily = fontFamily;
            document.getElementById('fontDropdown').classList.remove('show');
        }

        function showAddFontModal() {
            document.getElementById('addFontModal').style.display = 'block';
            document.getElementById('fontDropdown').classList.remove('show');
        }

        function closeAddFontModal() {
            document.getElementById('addFontModal').style.display = 'none';
            document.getElementById('fontName').value = '';
            document.getElementById('fontCss').value = '';
        }

        function addCustomFont() {
            const fontName = document.getElementById('fontName').value.trim();
            const fontCss = document.getElementById('fontCss').value.trim();
            
            if (!fontName || !fontCss) {
                alert('폰트 이름과 CSS를 모두 입력해주세요.');
                return;
            }
            
            // Add CSS to document
            const style = document.createElement('style');
            style.textContent = fontCss;
            document.head.appendChild(style);
            
            // Save to localStorage
            const customFont = { name: fontName, css: fontCss };
            customFonts.push(customFont);
            localStorage.setItem('customFonts', JSON.stringify(customFonts));
            
            // Add to dropdown
            const dropdown = document.getElementById('fontDropdown');
            const addUserItem = dropdown.querySelector('.dropdown-item:last-child');
            
            const newFontItem = document.createElement('div');
            newFontItem.className = 'dropdown-item';
            newFontItem.onclick = () => changeFont(fontName);
            newFontItem.textContent = fontName;
            
            dropdown.insertBefore(newFontItem, addUserItem);
            
            closeAddFontModal();
            alert('폰트가 성공적으로 추가되었습니다!');
        }

        function loadCustomFonts() {
            customFonts.forEach(font => {
                // Add CSS to document
                const style = document.createElement('style');
                style.textContent = font.css;
                document.head.appendChild(style);
                
                // Add to dropdown
                const dropdown = document.getElementById('fontDropdown');
                const addUserItem = dropdown.querySelector('.dropdown-item:last-child');
                
                const fontItem = document.createElement('div');
                fontItem.className = 'dropdown-item';
                fontItem.onclick = () => changeFont(font.name);
                fontItem.textContent = font.name;
                
                dropdown.insertBefore(fontItem, addUserItem);
            });
        }

        // Tab switching
        function switchTab(mode) {
            const visualTab = document.getElementById('visualTab');
            const htmlTab = document.getElementById('htmlTab');
            const editor = document.getElementById('editor');
            const htmlEditor = document.getElementById('htmlEditor');
            const currentModeSpan = document.getElementById('currentMode');
            
            currentMode = mode;
            
            if (mode === 'visual') {
                visualTab.classList.add('active');
                htmlTab.classList.remove('active');
                editor.style.display = 'block';
                htmlEditor.style.display = 'none';
                editor.innerHTML = htmlEditor.value;
                currentModeSpan.textContent = '비주얼';
            } else {
                htmlTab.classList.add('active');
                visualTab.classList.remove('active');
                htmlEditor.style.display = 'block';
                editor.style.display = 'none';
                htmlEditor.value = editor.innerHTML;
                currentModeSpan.textContent = 'HTML';
            }
            
            updateWordCount();
        }

        // Emoji picker
        function initEmojiPicker() {
            const emojis = ['😀', '😃', '😄', '😁', '😆', '😅', '😂', '🤣', '😊', '😇', '🙂', '🙃', '😉', '😌', '😍', '🥰', '😘', '😗', '😙', '😚', '😋', '😛', '😝', '😜', '🤪', '🤨', '🧐', '🤓', '😎', '🤩', '🥳', '😏', '😒', '😞', '😔', '😟', '😕', '🙁', '☹️', '😣', '😖', '😫', '😩', '🥺', '😢', '😭', '😤', '😠', '😡', '🤬', '🤯', '😳', '🥵', '🥶', '😱', '😨', '😰', '😥', '😓', '🤗', '🤔', '🤭', '🤫', '🤥', '😶', '😐', '😑', '😬', '🙄', '😯', '😦', '😧', '😮', '😲', '🥱', '😴', '🤤', '😪', '😵', '🤐', '🥴', '🤢', '🤮', '🤧', '😷', '🤒', '🤕'];
            const emojiPicker = document.getElementById('emojiPicker');
            
            emojis.forEach(emoji => {
                const btn = document.createElement('button');
                btn.className = 'emoji-btn';
                btn.textContent = emoji;
                btn.onclick = () => insertEmoji(emoji);
                emojiPicker.appendChild(btn);
            });
        }

        function showEmojiPicker() {
            const picker = document.getElementById('emojiPicker');
            picker.classList.toggle('show');
        }

        function insertEmoji(emoji) {
            if (currentMode === 'html') {
                const htmlEditor = document.getElementById('htmlEditor');
                const cursorPos = htmlEditor.selectionStart;
                const textBefore = htmlEditor.value.substring(0, cursorPos);
                const textAfter = htmlEditor.value.substring(cursorPos);
                htmlEditor.value = textBefore + emoji + textAfter;
                htmlEditor.selectionStart = htmlEditor.selectionEnd = cursorPos + emoji.length;
            } else {
                formatText('insertText', emoji);
            }
            document.getElementById('emojiPicker').classList.remove('show');
            updateWordCount();
        }

        // Font size controls
        function increaseFontSize() {
            if (currentFontSize < 72) {
                currentFontSize += 2;
                updateFontSize();
            }
        }

        function decreaseFontSize() {
            if (currentFontSize > 8) {
                currentFontSize -= 2;
                updateFontSize();
            }
        }

        function updateFontSize() {
            const editor = document.getElementById('editor');
            editor.style.fontSize = currentFontSize + 'px';
            document.getElementById('fontSizeDisplay').textContent = currentFontSize + 'px';
        }

        // Text formatting
        function formatText(command, value = null) {
            if (currentMode === 'html') return;
            
            document.execCommand(command, false, value);
            updateToolbarState();
        }

        function setTextColor() {
            if (currentMode === 'html') return;
            
            const color = document.getElementById('textColor').value;
            formatText('foreColor', color);
        }

        function setBackgroundColor() {
            if (currentMode === 'html') return;
            
            const color = document.getElementById('bgColor').value;
            formatText('backColor', color);
        }

        // Link functions
        function showLinkModal() {
            if (currentMode === 'html') return;
            
            const selection = window.getSelection().toString();
            document.getElementById('linkText').value = selection;
            document.getElementById('linkModal').style.display = 'block';
        }

        function closeLinkModal() {
            document.getElementById('linkModal').style.display = 'none';
        }

        function insertLink() {
            const text = document.getElementById('linkText').value;
            const url = document.getElementById('linkUrl').value;
            
            if (url) {
                const link = `<a href="${url}" target="_blank">${text || url}</a>`;
                formatText('insertHTML', link);
            }
            
            closeLinkModal();
        }

        // Image functions
        function insertImage() {
            if (currentMode === 'html') return;
            
            const url = prompt('이미지 URL을 입력하세요:');
            if (url) {
                formatText('insertImage', url);
            }
        }

        // File upload
        function handleFileUpload() {
            const file = document.getElementById('fileInput').files[0];
            if (file) {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        if (currentMode === 'html') {
                            const htmlEditor = document.getElementById('htmlEditor');
                            const imgTag = `<img src="${e.target.result}" alt="${file.name}" style="max-width: 100%; height: auto;">`;
                            const cursorPos = htmlEditor.selectionStart;
                            const textBefore = htmlEditor.value.substring(0, cursorPos);
                            const textAfter = htmlEditor.value.substring(cursorPos);
                            htmlEditor.value = textBefore + imgTag + textAfter;
                        } else {
                            formatText('insertImage', e.target.result);
                        }
                        updateWordCount();
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        // Spell check
        function toggleSpellCheck() {
            const editor = document.getElementById('editor');
            spellCheckEnabled = !spellCheckEnabled;
            editor.spellcheck = spellCheckEnabled;
            
            const btn = document.getElementById('spellCheckBtn');
            btn.classList.toggle('active', spellCheckEnabled);
        }

        // Update toolbar state
        function updateToolbarState() {
            if (currentMode === 'html') return;
            
            const commands = [
                { command: 'bold', btnId: 'boldBtn' },
                { command: 'italic', btnId: 'italicBtn' },
                { command: 'underline', btnId: 'underlineBtn' }
            ];
            
            commands.forEach(({ command, btnId }) => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    btn.classList.toggle('active', document.queryCommandState(command));
                }
            });
        }

        // Word count
        function updateWordCount() {
            let text = '';
            if (currentMode === 'html') {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = document.getElementById('htmlEditor').value;
                text = tempDiv.textContent || tempDiv.innerText || '';
            } else {
                text = document.getElementById('editor').textContent || '';
            }
            
            const words = text.trim().split(/\s+/).filter(word => word.length > 0).length;
            const chars = text.length;
            
            document.getElementById('wordCount').textContent = `단어: ${words}`;
            document.getElementById('charCount').textContent = `글자: ${chars}`;
        }

        // API for external use
        window.EditorAPI = {
            getContent: function() {
                if (currentMode === 'html') {
                    return document.getElementById('htmlEditor').value;
                } else {
                    return document.getElementById('editor').innerHTML;
                }
            },
            setContent: function(html) {
                if (currentMode === 'html') {
                    document.getElementById('htmlEditor').value = html;
                } else {
                    document.getElementById('editor').innerHTML = html;
                }
                updateWordCount();
            },
            getPlainText: function() {
                if (currentMode === 'html') {
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = document.getElementById('htmlEditor').value;
                    return tempDiv.textContent || tempDiv.innerText || '';
                } else {
                    return document.getElementById('editor').textContent;
                }
            },
            switchMode: function(mode) {
                switchTab(mode);
            },
            getCurrentMode: function() {
                return currentMode;
            },
            getWordCount: function() {
                const text = this.getPlainText();
                return text.trim().split(/\s+/).filter(word => word.length > 0).length;
            },
            getCharCount: function() {
                return this.getPlainText().length;
            },
            changeFont: function(fontFamily) {
                changeFont(fontFamily);
            },
            addCustomFont: function(name, css) {
                // Add CSS to document
                const style = document.createElement('style');
                style.textContent = css;
                document.head.appendChild(style);
                
                // Save to localStorage
                const customFont = { name: name, css: css };
                customFonts.push(customFont);
                localStorage.setItem('customFonts', JSON.stringify(customFonts));
                
                // Add to dropdown
                const dropdown = document.getElementById('fontDropdown');
                const addUserItem = dropdown.querySelector('.dropdown-item:last-child');
                
                const newFontItem = document.createElement('div');
                newFontItem.className = 'dropdown-item';
                newFontItem.onclick = () => changeFont(name);
                newFontItem.textContent = name;
                
                dropdown.insertBefore(newFontItem, addUserItem);
            }
        };

        //---------- 여기서 부터 원하는 코드 작성을 시작하세요 ---------/
        

        //-- 원하는 코드 작성이 끝났어요 --/
    </script>
</body>
</html>